<htmlform formName="HMIS 003 HIV Care ART Card - Clinical Assessment"
          formDescription="A visit for a client for clinical assessment "
          formEncounterType="8d5b2be0-c2cc-11de-8d13-0010c6dffd0f"
          formUuid="12de5bc5-352e-4faf-9961-a2125085a75c"
          formVersion="3.0"
          formAddMetadata="yes"
          formUILocation="patientDashboard.visitActions"
          formOrder="2"
          formIcon="icon-medkit"
          formShowIf="(visit.active || !visit.active) &amp;&amp; patient.person.dead==false &amp;&amp; sessionLocation.uuid=='86863db4-6101-4ecf-9a86-5e716d6504e4'"
          formDisplayStyle="Standard">
    <ifMode mode="ENTER,EDIT" include="false">
        <includeIf velocityTest="$fn.allEncounters('8d5b27bc-c2cc-11de-8d13-0010c6dffd0f').size() == 0">
            <script>
                jq(function () {
                jq().toastmessage('showErrorToast', "This patient has no Summary page");
                alert('This patient has no Summary page, you will now be forwarded to the patient dashboard');

                /*
                * queryParameters -> handles the query string parameters
                * queryString -> the query string without the fist '?' character
                * re -> the regular expression
                * m -> holds the string matching the regular expression
                */
                var queryParameters = {}, queryString = location.search.substring(1),
                re = /([^&amp;=]+)=([^&amp;]*)/g, m;

                // Creates a map with the query string parameters
                while (m = re.exec(queryString)) {
                queryParameters[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
                }

                /*
                * Replace the query portion of the URL.
                * jQuery.param() -> create a serialized representation of an array or
                * object, suitable for use in a URL query string or Ajax request.
                */
                location.href = window.location.protocol + "//" + window.location.host +
                '/' + OPENMRS_CONTEXT_PATH + '/coreapps/clinicianfacing/patient.page?patientId='
                + queryParameters['patientId']; // Causes page to reload
                });
            </script>
        </includeIf>
    </ifMode>
    <!-- jquery loaded for nonessential purposes. -->
    <script type="text/javascript">

        function enable_disable_district_tb_reg(selected_option) {

        var class_name = jq(selected_option).attr("class");

        var length = class_name.length;

        var class_id = parseInt(class_name.substring(length - 1, length))

        var row_id = class_id;

        var disable = true;
        var requires = false;

        var row_1 = '[class^="DistrictTbReg"][class*="Child1"]';

        var xx = row_1;
        var selected_value = jq(selected_option).find(":selected").attr("value");

        if (selected_value == "90071") {
        disable = false;
        requires = true;
        }

        switch (row_id) {
        case 1:
        xx = row_1;
        break;
        }


        jq(xx).each(function () {
        var group = jq(this);

        if (class_name.indexOf('Child') == -1) {
        /* group.find("input").attr("value", ""); */
        group.find("input").attr("required", requires);
        /* group.find('select').prop("selectedIndex", 0); */
        group.find("input").attr("disabled", disable);
        group.find('select').attr("disabled", disable);
        if (requires == false) {
        group.find('.required').show();
        }
        else if (requires == true) {
        group.find('.required').hide();
        }

        if (disable) {
        /* fade out the fields that are disabled */
        group.find("input").fadeTo(250, 0.25);
        group.find("select").fadeTo(250, 0.25);
        } else {
        /* remove the fade on the fields */
        group.find("input").fadeTo(250, 1);
        group.find("select").fadeTo(250, 1);
        }

        }
        });
        }


        if (jQuery) {

        var instabilityCause = "";

        function diff_months(dt2, dt1) {
        var diff = (dt2.getTime() - dt1.getTime()) / 1000;
        diff /= (60 * 60 * 24 * 7 * 4);
        return Math.abs(Math.round(diff));
        }


        jq(document).ready(function () {
        if (jq.browser.msie) {
        jq(":checkbox").click(function () {
        jq(this).change();
        });
        }

        //Block Multiple encounter entry on same date
        blockEncounterOnSameDateEncounter(jq("#encounterDate").find("input[type=hidden]"),"block");

        var stableArray = [];

        var previousVl = jq("#vl").text().trim();
        var currentRegimen = jq("#regimen").text().trim();
        var regimenBeforeDTG = jq("#regimen_before_dtg").text().trim();
        var onThirdLine = jq("#on_third_line").text().trim();
        var adherence = jq("#adherence").text().trim();
        var clinicStaging = jq("#clinic_staging").text().trim();
        var regimenStartedDate = jq("#regimen_started_date").text().trim();
        var regimenBeforeDTGStartedDate = jq("#regimen_started_date_before_dtg").text().trim();
        var sputumDate = jq("#sputum_date").text().trim();
        var artStartDate = jq("#art_start_date").text().trim();
        var teatmentStartDate = jq("#teatment_start_date").text().trim();
        var sputumValue = jq("#sputum_value").text().trim();
        var currentRegimenStartDate = jq("#current_regimen_start_date").text().trim();

        if (regimenBeforeDTG &amp;&amp; regimenBeforeDTG !== "") {
        regimenStartedDate = regimenBeforeDTGStartedDate;
        }

        var durationOnART;
        var durationOnCurrentRegimen;

        if (artStartDate !== "") {
        durationOnART = diff_months(new Date(artStartDate), new
        Date(jq("#encounterDate").find("input[type=hidden]").val()));
        jq("#99024 input").val(durationOnART);
        }

        if (currentRegimenStartDate !== "") {
        durationOnCurrentRegimen = diff_months(new Date(currentRegimenStartDate), new
        Date(jq("#encounterDate").find("input[type=hidden]").val()));
        jq("#99025 input").val(durationOnCurrentRegimen);
        }

        fieldHelper.makeReadonly(jq("#99025 input"));
        fieldHelper.makeReadonly(jq("#99024 input"));


        disableContainer("#165144");

        stabilityCheck();


        /* Validation of the ART regimen Selected */
        jq("#90315").change(function () {
        var regimen_encounter_page_value = jq("#90315").find("select").find(":selected").val();
        var regimen_encounter_page_text = jq("#90315").find("select").find(":selected").text();
        var art_transfer_regimen = jq("#artTransferRegimen").html();
        var other_art_transfer_regimen = jq("#otherArtTransferRegimen").html();
        var art_start_regimen = jq("#artStartRegimen").html();
        var other_art_start_regimen = jq("#otherArtStartRegimen").html();
        var first_second_regimen = jq("#firstSecondLineRegimen").html();
        var other_first_second_regimen = jq("#otherFirstSecondLineRegimen").html();
        var third_second_regimen = jq("#thirdLineRegimen").html();
        var other_third_regimen = jq("#otherThirdLineRegimen").html();
        var patient_regimen = other_third_regimen + third_second_regimen + other_first_second_regimen +
        other_first_second_regimen + first_second_regimen + other_art_start_regimen + art_start_regimen +
        other_art_transfer_regimen + art_transfer_regimen;

        /* Check if Patient has art start or tranfer regimen selected on ART Summary Page*/
        if (art_start_regimen == "null" &amp;&amp; art_transfer_regimen == "null") {
        jq().toastmessage('showNoticeToast', "Patient Doesn't have any either ART Start or Transfer regimen on ART
        Summary selected");
        }

        if (!patient_regimen.includes(regimen_encounter_page_value)) {
        jq().toastmessage('showNoticeToast', "The regimen" + regimen_encounter_page_text + "you have selected is
        different from the current regimen in the Summary page. Please update the summary page with a
        switch/substitution to the selected regimen");
        }

        if (currentRegimen !== jq("#90315").find("select").find(":selected").val()) {
        jq("#99025 input").val(0);
        }else {
        jq("#99025 input").val(durationOnCurrentRegimen);
        }
        stabilityCheck();
        });
        /* End of Validation */


        /* Handle viral load results */
        jq("#viral-load-results-copies").attr("disabled", true);
        jq("#viral-load-results-qualitative").change(function () {
        var viral_load_status = getValue('viral-load-results-qualitative.value');
        if (viral_load_status == 1301) {
        /* Detected */
        jq("#viral-load-results-copies").attr("disabled", false).attr("readonly", false).fadeTo(250, 1);
        <ifMode mode="ENTER">
            setValue('viral-load-results-copies.value', '');
        </ifMode>

        var viral_load_copies = getValue('viral-load-results-copies.value');
        if(viral_load_copies == 1){
        setValue('viral-load-results-copies.value', '');
        }
        }
        if (viral_load_status == 1306) {
        /* Not Detected */
        jq("#viral-load-results-copies").attr("disabled", false).attr("readonly", true).fadeTo(250, 0.25);
        setValue('viral-load-results-copies.value', 1);
        }
        if (viral_load_status == "" || viral_load_status == 1304) {
        /* Sample Rejected and no data */
        jq("#viral-load-results-copies").attr("disabled", true).attr("readonly", true).fadeTo(250, 0.25);
        setValue('viral-load-results-copies.value', '');
        }
        });

        jq("#viral-load-results-copies").change(function () {
        previousVl = jq("#viral-load-results-copies").find("input").val();
        stabilityCheck();
        });


        // trigger a change when the form loads
        jq("#viral-load-results-qualitative").change();


        jq('[class^="ARTYesNoEnableDisable"]').change(function () {
        enable_disable(jq(this), "ARTYesNo", 'selected_value == "yes" &amp;&amp; selected_value!=""', "select");
        });

        jq('[class^="ARTYesNoEnableDisable"]').each(function () {
        enable_disable(jq(this), "ARTYesNo", 'selected_value == "yes" &amp;&amp; selected_value!=""', "select");
        });

        jq('[class^="RegimenEnableDisable"]').change(function () {
        enable_disable(jq(this), "Regimen", 'selected_value == "other"', "select");
        });

        jq('[class^="RegimenEnableDisable"]').each(function () {
        enable_disable(jq(this), "Regimen", 'selected_value == "other"', "select");
        });

        jq('[class^="OtherAppointmentReasonEnableDisable"]').change(function () {
        enable_disable(jq(this), "OtherAppointmentReason", 'selected_value == "14. other specify"', "select");
        });

        jq('[class^="OtherAppointmentReasonEnableDisable"]').each(function () {
        enable_disable(jq(this), "OtherAppointmentReason", 'selected_value == "14. other specify"', "select");
        });

        jq('[class^="DistrictTbRegEnableDisable"]').change(function () {
        enable_disable_district_tb_reg(jq(this));
        });

        jq('[class^="DistrictTbRegEnableDisable"]').each(function () {
        enable_disable_district_tb_reg(jq(this));
        });


        jq('[class^="AdherenceEnableDisable"]').change(function () {
        enable_disable(jq(this), "Adherence", 'selected_value == "poor" || selected_value=="fair"', "select");
        });

        jq('[class^="AdherenceEnableDisable"]').each(function () {
        enable_disable(jq(this), "Adherence", 'selected_value == "poor" || selected_value=="fair"', "select");
        });


        jq("#90203").change(function () {
        clinicStaging = jq(this).find(":selected").val();
        stabilityCheck();
        })

        jq("#returndate").each(function () {
        if (jq("#returndate").find("input[type=hidden]").val() != "") {
        enableContainer("#reason_for_appointment");
        } else {
        disableContainer("#reason_for_appointment");
        }
        });

        jq("#returndate").change(function () {
        if (jq("#returndate").find("input[type=hidden]").val() != "") {
        enableContainer("#reason_for_appointment");
        } else {
        disableContainer("#reason_for_appointment");
        }
        });


        jq(".enableDisable").each(function () {
        var group = jq(this);

        function disableFn() {
        group.children("#disabled").fadeTo(250, 0.25);
        /* group.children("#disabled").find(":checkbox").attr("checked", false); uncheck */
        group.children("#disabled").find("input").attr("disabled", true);
        /* disable */
        group.children("#disabled").find("select").attr("disabled", true);
        }

        function enableFn() {
        group.children("#disabled").fadeTo(250, 1);
        group.children("#disabled").find("input").attr("disabled", false);
        group.children("#disabled").find("select").attr("disabled", false);

        }

        if (jq(this).children("#trigger").find(":checkbox:first").attr("checked") != "checked") {
        disableFn();
        }

        jq(this).children("#trigger").find(":checkbox:first").change(function () {
        var checked = jq(this).attr("checked");
        if (checked == "checked") {
        enableFn();
        } else {
        disableFn();
        }
        });
        });


        function stabilityCheck() {
        /*Viral Load Check*/

        stableArray = [];
        instabilityCause = "";

        if (previousVl !== "" &amp;&amp; previousVl &lt;= 1000) {
        stableArray.push(true);
        } else {
        stableArray.push(false);
        instabilityCause = instabilityCause + "Viral Load is Not Suppressed \n ";
        }

        /* Third Line*/

        if (onThirdLine !== "true") {
        stableArray.push(true);
        } else {
        stableArray.push(false);
        instabilityCause += "Current regimen is a third line regimen \n "
        }

        /* Adherence Check*/

        if (adherence.length &lt;= 0 || adherence.trim().includes("POOR")) {
        stableArray.push(false);
        instabilityCause += "Adherence is not Good \n "
        } else {
        stableArray.push(true);
        }

        /* Clinic staging */
        if (clinicStaging === "90033" || clinicStaging === "90034" || clinicStaging === "90293" || clinicStaging ===
        "90294") {
        stableArray.push(true);
        } else {
        stableArray.push(false);
        instabilityCause += "Clinic stage is neither 1 or 2 \n";
        }
        var pageCurrentRegimen = jq("#90315").find("select").find(":selected").val();
        var pageEncounterDate = jq("#encounterDate").find("input[type=hidden]").val();

        if (currentRegimen !== "" &amp;&amp; (currentRegimen === pageCurrentRegimen) &amp;&amp; diff_months(new
        Date(pageEncounterDate), new Date(regimenStartedDate)) &gt; 12) {
        stableArray.push(true);
        } else {
        stableArray.push(false);
        instabilityCause += "Patient has not spent more than 12 moths on current Regiment \n "
        }

        if (sputumValue !== "" &amp;&amp; sputumValue !== "664" &amp;&amp; diff_months(new
        Date(jq("#encounterDate").find("input[type=hidden]").val()), new Date(teatmentStartDate)) &lt; 2) {
        stableArray.push(false);
        instabilityCause += "Patient has not been on treatment for TB for at least 2 months"
        } else {
        stableArray.push(true);
        }
        instabilityCause.trim().replace()

        if (stableArray.indexOf(false) != -1) {
        jq("#165144 select").val("90004");
        } else {
        jq("#165144 select").val("90003");
        }

        }
        });


        <!-- Validation rules -->
        beforeSubmit.push(function () {
        <!-- clear the previous errors -->
        setValue('returndate.error', '');
        setValue('viral-load-results-copies.error', '');
        setValue('date-viral-load-taken.error', '');

        var encounterDate = new Date((getValue('encounterDate.value')));
        var returnDate = new Date((getValue('returndate.value')));

        if (encounterDate &gt;= returnDate) {
        getField('returndate.error').html('The return date must be after the date of this visit ' +
        formatDateForDisplay(encounterDate)).show();
        return false;
        }

        <!-- Check that the return date is before the transfer out date only if there is a transfer out date -->
        if (jq('#transfer_out_date_id').html().replace(/\s+/, "").length > 0) {
        var transfer_out_date_id = new Date(jq('#transfer_out_date_id').html());
        if (returnDate &gt;= transfer_out_date_id) {
        getField('returndate.error').html('The return date must be before the transfer out date of ' +
        formatDateForDisplay(transfer_out_date_id)).show();
        return false;
        }
        return false;
        }

        var viral_load_qualitative = getValue('viral-load-results-qualitative.value');
        var date_viral_load_taken = getValue('date-viral-load-taken.value');
        /* The date that the viral load was taken is required if a qualitative result is selected */
        if (viral_load_qualitative != "") {
        if (date_viral_load_taken == "") {
        getField('date-viral-load-taken.error').html('Please enter the date when the viral load sample was
        taken').show();
        return false;
        }
        }

        /** The date the viral load was taken cannot be after the encounter date */
        if (date_viral_load_taken != "") {
        if (encounterDate &lt; date_viral_load_taken) {
        getField('date-viral-load-taken.error').html('The date the viral load sample was taken cannot be after the date
        of this visit ' + encounterDate).show();
        return false;
        }
        }

        /* If the viral load is detected, the number of copies must be greater than 20 which is the lowest detectable
        level for a machine */
        if ((viral_load_qualitative == 1301) &amp;&amp; (getValue('viral-load-results-copies.value') &lt; 20)) {
        getField('viral-load-results-copies.error').html('Please enter the number of virus copies per ml. the minimum
        number of copies is 20').show();
        return false;
        }

        /* if DSDM is not FBIM or FTR or Empty and patient is not stable should not save.*/
        if (jq("#165144").find("select").find(":selected").val() !== "90003" &amp;&amp;
        (jq("#165143").find("select").find(":selected").val() !== "165138" &amp;&amp;
        jq("#165143").find("select").find(":selected").val() !== "165140" &amp;&amp;
        jq("#165143").find("select").find(":selected").val() !== "")) {
        getField('165143.error').html('Patient Not Stable due to ' + instabilityCause + '. \n Only Stable Patients can
        be enrolled in ' + jq("#165143").find("select").find(":selected").text()).show();

        jq().toastmessage('showErrorToast', " Patient Not Stable " + instabilityCause + ". \n Only Stable Patients can
        be enrolled in " + jq("#165143").find("select").find(":selected").text());
        return false;
        }

        return true;
        });


        }
    </script>

    <style>
        .nav-link-1{
        background-color: #03aec3;
        }
        .nav-pills .nav-link.active, .nav-pills .show>.nav-link {
        color: #FFFFFF;
        background-color: #000000;
        border-radius: 5px;
        }
        form .lablex2 span {
        min-width: 50%;
        float: left;
        margin: 1px 0px;
        }
        form .lablex3 span {
        min-width: 31%;
        float: left;
        margin: 1px 0px;
        }
    </style>

    <!-- This section contains lookup tags that pick data from other forms-->

    <lookup complexExpression="#set($art_start_regimen='null') #set($other_art_start_regimen='null') #set($art_transfer_regimen='null') #set($other_art_transfer_regimen='null')"/>

    <lookup complexExpression="#set($first_second_line_regimen='null') #set($other_first_second_line_regimen='null')"/>

    <lookup complexExpression="#set($third_line_regimen='null') #set($other_third_line_regimen='null')"/>

    <span style="display: none" id="artStartRegimen">
        <lookup
                complexExpression="#set($art_start_regimen=($fn.latestObs('99061').valueCoded))$art_start_regimen"/>
    </span>

    <span style="display: none" id="otherArtStartRegimen">
        <lookup
                complexExpression="#set($other_art_start_regimen=($fn.latestObs('99268').valueText))$other_art_start_regimen"/>
    </span>

    <span style="display: none" id="artTransferRegimen">
        <lookup
                complexExpression="#set($art_transfer_regimen=$fn.latestObs('99064').valueCoded)$art_transfer_regimen"/>
    </span>

    <span style="display: none" id="otherArtTransferRegimen">
        <lookup
                complexExpression="#set($other_art_transfer_regimen=$fn.latestObs('99269').valueText)$other_art_transfer_regimen"/>
    </span>

    <span style="display: none" id="firstSecondLineRegimen">
        <lookup
                complexExpression="#foreach($first_second_line_regimen in $fn.allObs(90315)) $first_second_line_regimen.valueCoded #end"/>
    </span>

    <span style="display: none" id="otherFirstSecondLineRegimen">
        <lookup
                complexExpression="#foreach($other_first_second_line_regimen in $fn.allObs(99146)) $other_first_second_line_regimen.valueText #end"/>
    </span>


    <span style="display: none" id="thirdLineRegimen">
        <lookup
                complexExpression="#foreach($third_line_regimen in $fn.allObs(162990)) $first_second_line_regimen.valueCoded #end"/>
    </span>

    <span style="display: none" id="otherThirdLineRegimen">
        <lookup
                complexExpression="#foreach($other_third_line_regimen in $fn.allObs(162989)) $other_first_second_line_regimen.valueText #end"/>
    </span>


    <div class="row">
        <div class="col-3">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                <a class="nav-link  nav-link-1 active active-1" id="v-pills-home-tab" data-toggle="pill"
                   href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">Clinical Encounter
                </a>
                <a class="nav-link nav-link-1" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile"
                   role="tab" aria-controls="v-pills-profile" aria-selected="false">Investigation Reports
                </a>
                <a class="nav-link nav-link-1" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages"
                   role="tab" aria-controls="v-pills-messages" aria-selected="false">Diagnosis
                </a>
                <a class="nav-link nav-link-1" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings"
                   role="tab" aria-controls="v-pills-settings" aria-selected="false">Final outcome
                </a>
            </div>
        </div>
        <div class="col-9">
            <div class="tab-content" id="v-pills-tabContent">
                <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel"
                     aria-labelledby="v-pills-home-tab">
                    <div class="card">
                        <div class="card-header">
                            Triage Information: Vitals and Nutrition Assessment
                        </div>
                        <div class="card-body">
                            <nav>
                                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                    <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab"
                                       href="#patient-vitals" role="tab" aria-controls="nav-home" aria-selected="true">
                                        Triage Information
                                    </a>
                                    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab"
                                       href="#nav-family-planning" role="tab" aria-controls="nav-profile"
                                       aria-selected="false">Pregnancy /Family Planning
                                    </a>
                                    <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab"
                                       href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">
                                        Examination
                                    </a>
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade show active" id="patient-vitals" role="tabpanel"
                                     aria-labelledby="nav-home-tab">
                                    <uiInclude provider="ugandaemrpoc" fragment="vitals"/>
                                </div>
                                <div class="tab-pane fade" id="nav-family-planning" role="tabpanel"
                                     aria-labelledby="nav-profile-tab">
                                    <div class="">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="card" style="margin-top:10px">
                                                    <div class="card-header">
                                                        <label>Pregnancy and EmTCT</label>
                                                    </div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>Are you pregnant?</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="90041" style="checkbox"
                                                                         answerConceptIds="1065,1066"
                                                                         answerLabels="Yes,No"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>EDD</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="5596" allowFutureDates="true"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>In EMTCT</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="90012"
                                                                         answerConceptIds="90003,90004"
                                                                         answerLabels="Yes,No"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>Gestation in Weeks</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="162983"/>
                                                                </div>
                                                            </div>
                                                        </div>


                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>ANC NO.</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <patient field="identifier"
                                                                             identifierTypeId="b0cc255e-ef57-4266-839e-0df7f5099eb9"
                                                                             required="false"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card" style="margin-top:10px">
                                                    <div class="card-header">
                                                        <label>Family Planning</label>
                                                    </div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>Family Planning Status</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs id="br" conceptId="90238"
                                                                         answerConceptIds="90082,90081"
                                                                         answerLabels="Yes,No"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="width:100%;text-align:center">
                                                            <h3>Methods</h3>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <obs id="br" conceptId="374" answerConceptId="190"
                                                                         answerLabel="Condoms"/>
                                                                    <excludeIf velocityTest="$patient.gender =='M' ">

                                                                        <obs id="br" conceptId="374"
                                                                             answerConceptId="780"
                                                                             answerLabel="Oral Contraceptive pills"/>
                                                                        <obs id="br" conceptId="374"
                                                                             answerConceptId="5279"
                                                                             answerLabel="Injectable/Implantable hormonies"/>
                                                                        <obs id="br" conceptId="374"
                                                                             answerConceptId="5278"
                                                                             answerLabel="Diaphram/Cervical Cap"/>
                                                                        <obs id="br" conceptId="374"
                                                                             answerConceptId="5275"
                                                                             answerLabel="Intra uterine device (IUD)"/>

                                                                    </excludeIf>
                                                                    <obs id="br" conceptId="374" answerConceptId="99265"
                                                                         answerLabel="Vasectomy/Tubal ligation"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>Any intention to conceive in next 3 months
                                                                    </label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="165260"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>CaCx screening</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="90012"
                                                                         answerConceptIds="90003,90004"
                                                                         answerLabels="Yes,No"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="nav-contact" role="tabpanel"
                                     aria-labelledby="nav-contact-tab">
                                    <div class="assesment">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Presenting Signs and Symptoms</div>
                                                    <div class="card-body">
                                                        <span class="lablex3">
                                                            <repeat with="['90132','Cough'],['90133','DB'],['90128','Dementia'],['90129','Enceph'],['90131','Fever'],['90138','GUD'],['90094','Headache'],['90134','IRIS'],['123','Malaria'],['90127','Pneumonia'],['90137','PID'],['999','RTI'],['90130','Thrush'],['90136','UD'],['90139','Ulcers'],['106 ','URTI'],['90135','Weight loss'],['90126','Zoster'],['507','KS'],['1294','CCM']">
                                                                <obs id="{0}" conceptId="90251" answerConceptId="{0}"
                                                                     answerLabel="{1}" style="checkbox"/>
                                                            </repeat>
                                                            <span id="trigger">
                                                                <obs conceptId="90251" answerConceptId="90002"
                                                                     answerLabel="Other specify:"/>
                                                            </span>
                                                            <span id="disabled">
                                                                <obs conceptId="99032" size="17" labelText=""/>
                                                            </span>
                                                        </span>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Diagnosis</div>
                                                    <div class="card-body">
                                                        <encounterDiagnoses required="true"
                                                                            selectedDiagnosesTarget="#encounter-diagnoses-target"
                                                                            preferredCodingSource="ICD-10-WHO"
                                                                            diagnosisConceptClasses="Diagnosis"/>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Side Effects Of ART</div>
                                                    <div class="card-body">
                                                        <span class="lablex2">
                                                            <repeat with="['90100','AB'],['90099','Anaemia'],['90095','BN'],['90117','CNS'],['90092','Diarrhoea'],['90116','FAT'],['90093','Fatigue'],['90094','Headache'],['90115','Jaundice'],['90091','Nausea'],['90098','Rash']">
                                                                <obs id="{0}" conceptId="90227" answerConceptId="{0}"
                                                                     answerLabel="{1}" style="checkbox"/>
                                                            </repeat>
                                                            <span id="trigger">
                                                                <obs conceptId="90227" answerConceptId="90002"
                                                                     answerLabel="Other specify:"/>
                                                            </span>
                                                            <span id="disabled">
                                                                <obs conceptId="99113" size="17" labelText=""/>
                                                            </span>
                                                        </span>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Advanced Disease and WHO Clinical Stage
                                                    </div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>Advanced Disease Status</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="165272"/>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <lable>WHO Clinical stage</lable>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs id="90203" conceptId="90203"
                                                                         answerConceptIds="90033,90034,90035,90036,90293,90294,90295,90296"
                                                                         answerLabels="1,2,3,4,T1,T2,T3,T4"
                                                                         labelText=""/>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">Syphilis status</div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <label>Heb Tested</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <obs conceptId="1271" answerConceptId="1322"
                                                                         answerLabel="Hep B Test" labelText=""/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <label>Heb Result</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <obs conceptId="1322" answerConceptIds="703,664"
                                                                         answerLabels="Positive,Negative" labelText=""/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-3">
                                                                    <label>Syphilis status</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <obs conceptId="99752"
                                                                         answerConceptIds="162848,99756,99755,99754"
                                                                         answerLabels="No Symptoms,Symptomatic Non-Reactive,Symptomatic Reactive, Symptomatic Reactive and treated"
                                                                         labelText=""/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="card" style="margin-top: 10px;">
                                                    <div class="card-header">TB AND TPT</div>
                                                    <div class="card-body">
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>TB Status</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="90216"
                                                                         answerConceptIds="90079,90073,90078,90071"
                                                                         answerLabels="1. No signs,2. Suspect,3. Diagnosed with Tb,4. Tb Rx"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-4">
                                                                    <label>TPT Status</label>
                                                                </div>
                                                                <div class="col-8">
                                                                    <obs conceptId="165261"
                                                                         answerConceptIds="165262,656,165263,165264,1267"
                                                                         answerLabels="Never Initiated,On INH,Defaulted,Taken off due to side effects,Completed"/>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>TPT date initiated</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="165226"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div style="margin-top:10px">
                                                            <div class="row">
                                                                <div class="col-5">
                                                                    <label>TPT date completed</label>
                                                                </div>
                                                                <div class="col-7">
                                                                    <obs conceptId="165227"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                    Investigation Reports Go Here
                </div>
                <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                    Prescriptions Go Here
                </div>
                <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                    Final Outcome Go Here
                </div>
            </div>
        </div>
    </div>
</htmlform>